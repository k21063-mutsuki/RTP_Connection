# RTPを用いた通信機能
UDPとRTPパケットを用いた通信機能．RTPパケットの生成や解析，UDPソケットによる通信をlibraryが行うことで，ユーザはメインスレッドで行う処理とコールバック関数を定義するのみで通信を行うことが可能となる
  
利用手順  
〜サーバ側〜  
①サーバがデータを送信する際に行いたい処理をコールバック関数として定義  
②通信機能となるlibraryを利用し，library.UDPServerにより別スレッドでサーバを起動（チャネルとコールバック関数を引数とする）  
③サーバに渡すデータを処理し，チャネルを使ってサーバスレッドへデータを送信  
〜クライアント側〜  
①サーバから受信したデータに対して行いたい処理をコールバック関数として定義  
②通信機能となるlibraryを利用し，library.UDPClientBatchによりサーバからデータを取得（送信するデータ，データの種類，タイムスタンプの増加量，コールバック関数を引数とする）  
③サーバから受け取ったデータを処理  

起動手順  
〜前提条件〜  
起動コマンドはgo run ~~.go <自身の設定情報>　<自身が接続しに行く相手の情報>  
<自身の設定情報>は，ipアドレス,ポート,node_<サービスのID>,パラメータ1,パラメータ2,...の順で定義  
<自身が接続しに行く相手の情報>も，ipアドレス,ポート,node_<サービスのID>,パラメータ1,パラメータ2,...の順で定義  
コマンド具体例　go run main.go 0.0.0.0,9000,node_1744613665349,100.0,60.0,10  0.0.0.0,9001,node_1744618965093  
①サーバ側のサービスを起動コマンドによって起動  
②クライアント側のサービスを起動コマンドによって起動  
〜具体例〜  
①cameraフォルダのmain.goをgo run main.go <ip1>,<port2>,node_<ID1>により起動  
②scratchdetectionフォルダのmain.goをgo run main.go <ip2>,<port2>,node_<ID2>  <ip1>,<port1>,node_<ID1>により起動  
これによりcameraで撮影したWebカエラの映像をscratchdetectionでエッジ検出し出力することが可能（適度な閾値の調整が必要）  
